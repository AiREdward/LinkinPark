<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Registrati</title>
    <style>
        /* Centra il contenuto verticalmente */
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            flex-direction: column;
        }

        /* Contenitore per il modulo */
        main {
            width: 300px;
            text-align: center;
        }

        /* Spaziatura tra i campi */
        form label, form input, .password-strength, form button, form small {
            display: block;
            width: 100%;
            margin: 10px 0;
        }

        /* Barra di forza della password */
        .password-strength {
            width: 80%; /* Dimensione fissa della barra genitore */
            height: 10px;
            background-color: #e0e0e0;
            margin: 5px auto; /* Centra la barra */
            overflow: hidden; /* Evita che la barra interna ecceda i confini */
        }

        .password-strength div {
            height: 100%;
            width: 0%; /* Imposta la larghezza iniziale a 0% */
            transition: width 0.3s ease; /* Aggiunge un'animazione per la progressione della barra */
        }

        .checkbox-container {
            text-align: left;
        }

        .checkbox-container label {
            display: inline-block;
            margin: 5px 0;
        }

        /* Stile del Modale */
        .modal {
            display: none; /* Modale nascosto per default */
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.4); /* Sfondo semi-trasparente */
        }

        .modal-content {
            background-color: #fff;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 600px;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }

    </style>
</head>
<body>
    <header>
        <h1>Registrati</h1>
    </header>
    
    <main>
        <form action="php/registration.php" method="post" onsubmit="return validateForm()">
            <label for="name">Nome:</label>
            <input type="text" id="name" name="name" required>
            
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" required>
            
            <label for="password">Password:</label>
            <input type="password" id="password" name="password" required oninput="checkPasswordStrength()">
            
            <!-- Barra di forza della password -->
            <div class="password-strength">
                <div id="strength-bar"></div>
            </div>
            <small id="password-hint">La password deve contenere almeno 8 caratteri, una maiuscola, una minuscola, un numero e un carattere speciale.</small>
            
            <label for="confirm-password">Conferma Password:</label>
            <input type="password" id="confirm-password" name="confirm-password" required>
            
            <!-- Checkbox Privacy -->
            <div class="checkbox-container">
                <label>
                    <input type="checkbox" id="privacy" name="privacy" required>
                    Accetto la <a href="#" onclick="openModal('privacyModal')">Privacy Policy</a>.
                </label>
            </div>
            
            <!-- Checkbox Termini di Servizio -->
            <div class="checkbox-container">
                <label>
                    <input type="checkbox" id="terms" name="terms" required>
                    Accetto i <a href="#" onclick="openModal('termsModal')">Termini di Servizio</a>.
                </label>
            </div>
            
            <button type="submit">Registrati</button>
        </form>
        
        <p>Hai già un account? <a href="login.html">Accedi qui</a></p>
    </main>

    <!-- Modale Privacy Policy -->
    <div id="privacyModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('privacyModal')">&times;</span>
            <h2>Privacy Policy</h2>
            <p>Inserisci qui il testo completo della tua Privacy Policy...</p>
        </div>
    </div>

    <!-- Modale Termini di Servizio -->
    <div id="termsModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('termsModal')">&times;</span>
            <h2>Termini di Servizio</h2>
            <p>Inserisci qui il testo completo dei tuoi Termini di Servizio...</p>
        </div>
    </div>

    <script>
        // Funzione per aprire il modale
        function openModal(modalId) {
            var modal = document.getElementById(modalId);
            modal.style.display = "block";
        }

        // Funzione per chiudere il modale
        function closeModal(modalId) {
            var modal = document.getElementById(modalId);
            modal.style.display = "none";
        }

        // Funzione per controllare la forza della password
        function checkPasswordStrength() {
            const password = document.getElementById('password').value;
            const strengthBar = document.getElementById('strength-bar');
            let strength = 0;

            // Incrementa la forza in base ai requisiti
            if (password.length >= 8) strength++;
            if (/[A-Z]/.test(password)) strength++;
            if (/[a-z]/.test(password)) strength++;
            if (/[0-9]/.test(password)) strength++;
            if (/[^A-Za-z0-9]/.test(password)) strength++;

            // Imposta la larghezza della barra in base alla forza
            strengthBar.style.width = (strength * 25) + '%';

            // Imposta il colore della barra in base alla forza
            if (strength === 1) strengthBar.style.backgroundColor = 'red';
            if (strength === 2) strengthBar.style.backgroundColor = 'orange';
            if (strength === 3) strengthBar.style.backgroundColor = 'yellowgreen';
            if (strength >= 4) strengthBar.style.backgroundColor = 'green';
        }

        // Convalida i campi del form
        function validateForm() {
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirm-password').value;

            // Controlla che la password rispetti i requisiti
            const isValidPassword = (
                password.length >= 8 &&
                /[A-Z]/.test(password) &&
                /[a-z]/.test(password) &&
                /[0-9]/.test(password) &&
                /[^A-Za-z0-9]/.test(password)
            );

            if (!isValidPassword) {
                alert("La password non rispetta i requisiti di complessità.");
                return false;
            }

            // Controlla che le password coincidano
            if (password !== confirmPassword) {
                alert("Le password non coincidono.");
                return false;
            }

            // Controlla che la checkbox privacy sia selezionata
            const privacyCheckbox = document.getElementById('privacy');
            if (!privacyCheckbox.checked) {
                alert("Devi accettare la Privacy Policy.");
                return false;
            }

            // Controlla che la checkbox dei Termini di Servizio sia selezionata
            const termsCheckbox = document.getElementById('terms');
            if (!termsCheckbox.checked) {
                alert("Devi accettare i Termini di Servizio.");
                return false;
            }

            return true; // Form valido
        }
    </script>
</body>
</html>
